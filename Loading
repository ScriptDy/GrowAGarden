local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LoadingScreen"
screenGui.IgnoreGuiInset = true -- Cover the entire screen, including top bar
screenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create main frame (full black background)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Solid black
frame.BackgroundTransparency = 0
frame.Parent = screenGui

-- Create loading text
local textLabel = Instance.new("TextLabel")
textLabel.Size = UDim2.new(0.5, 0, 0.1, 0)
textLabel.Position = UDim2.new(0.25, 0, 0.4, 0)
textLabel.BackgroundTransparency = 1
textLabel.Text = "Loading..."
textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
textLabel.TextScaled = true
textLabel.Font = Enum.Font.SourceSansBold
textLabel.Parent = frame

-- Create "Powered by Roblox" text
local robloxText = Instance.new("TextLabel")
robloxText.Size = UDim2.new(0.5, 0, 0.05, 0)
robloxText.Position = UDim2.new(0.25, 0, 0.85, 0)
robloxText.BackgroundTransparency = 1
robloxText.Text = ""
robloxText.TextColor3 = Color3.fromRGB(200, 200, 200)
robloxText.TextScaled = true
robloxText.Font = Enum.Font.SourceSansItalic
robloxText.Parent = frame

-- Create spinning loader
local spinner = Instance.new("ImageLabel")
spinner.Size = UDim2.new(0.1, 0, 0.1, 0)
spinner.Position = UDim2.new(0.45, 0, 0.5, 0)
spinner.BackgroundTransparency = 1
spinner.Image = "rbxassetid://123456789" -- Replace with a spinner image asset ID
spinner.Parent = frame

-- Disable Roblox core GUI (top bar and menu)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

-- Block Esc key to prevent opening the Roblox menu
local function blockEscKey(input, gameProcessedEvent)
	if input.KeyCode == Enum.KeyCode.Escape and not gameProcessedEvent then
		return -- Prevent default Esc behavior
	end
end
UserInputService.InputBegan:Connect(blockEscKey)

-- Animate spinner
local function rotateSpinner()
	while spinner.Parent do
		local rotation = spinner.Rotation + 360
		local tween = TweenService:Create(spinner, TweenInfo.new(1, Enum.EasingStyle.Linear), {Rotation = rotation})
		tween:Play()
		tween.Completed:Wait()
	end
end

-- Fade out loading screen and restore core GUI
local function fadeOut()
	-- Re-enable core GUI before fading out
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)
	
	local tween = TweenService:Create(frame, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {BackgroundTransparency = 1})
	tween:Play()
	for _, child in pairs(frame:GetChildren()) do
		if child:IsA("GuiObject") then
			TweenService:Create(child, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {ImageTransparency = 1, TextTransparency = 1}):Play()
		end
	end
	tween.Completed:Wait()
	screenGui:Destroy()
end

-- Start spinner animation
spawn(rotateSpinner)

-- Simulate loading process (replace with actual loading logic)
wait(300) -- 5 minutes

-- Fade out and remove loading screen
fadeOut()
