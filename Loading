local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- Helper function for bold text
local function styleBoldText(label, text)
	label.Text = text
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextScaled = true
	label.Font = Enum.Font.SourceSansBold
	label.BackgroundTransparency = 1

	local stroke = Instance.new("UIStroke")
	stroke.Thickness = 2
	stroke.Color = Color3.fromRGB(0, 0, 0)
	stroke.Parent = label
end

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LoadingScreen"
screenGui.IgnoreGuiInset = true
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

-- Fullscreen black frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0)
frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
frame.BackgroundTransparency = 0
frame.ZIndex = 10
frame.Parent = screenGui

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0.5, 0, 0.1, 0)
titleLabel.Position = UDim2.new(0.25, 0, 0.3, -20)
titleLabel.ZIndex = 11
titleLabel.Parent = frame
styleBoldText(titleLabel, "Pet Spawner")

-- Percentage label
local percentLabel = Instance.new("TextLabel")
percentLabel.Size = UDim2.new(0.5, 0, 0.1, 0)
percentLabel.Position = UDim2.new(0.25, 0, 0.4, -20)
percentLabel.ZIndex = 11
percentLabel.Parent = frame
styleBoldText(percentLabel, "Loading: 0%")

-- Progress bar background
local progressBackground = Instance.new("Frame")
progressBackground.Size = UDim2.new(0.6, 0, 0.05, 0)
progressBackground.Position = UDim2.new(0.2, 0, 0.45, 0)
progressBackground.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
progressBackground.BorderSizePixel = 0
progressBackground.ZIndex = 11
progressBackground.Parent = frame

-- Progress bar fill
local progressFill = Instance.new("Frame")
progressFill.Size = UDim2.new(0, 0, 1, 0)
progressFill.Position = UDim2.new(0, 0, 0, 0)
progressFill.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
progressFill.BorderSizePixel = 0
progressFill.ZIndex = 12
progressFill.Parent = progressBackground

-- "Generating..." text
local generatingLabel = Instance.new("TextLabel")
generatingLabel.Size = UDim2.new(0.5, 0, 0.1, 0)
generatingLabel.Position = UDim2.new(0.25, 0, 0.5, 10)
generatingLabel.ZIndex = 11
generatingLabel.Parent = frame
styleBoldText(generatingLabel, "GENERATING...")

-- Hide ALL Roblox UI during loading
StarterGui:SetCore("TopbarEnabled", false)
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, false)

-- Trap mouse input on loading screen
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.UserInputType == Enum.UserInputType.MouseButton1 
	or input.UserInputType == Enum.UserInputType.Touch then
		-- Block clicks outside
	end
end)

-- Update loading progress
local totalTime = 120
local currentTime = 0
local function updateProgress()
	while currentTime < totalTime and frame.Parent do
		currentTime = currentTime + RunService.Heartbeat:Wait()
		local progress = math.min(currentTime / totalTime, 1)
		progressFill.Size = UDim2.new(progress, 0, 1, 0)
		percentLabel.Text = "Loading: " .. math.floor(progress * 100) .. "%"
	end
end

-- Fade out & restore Roblox UI
local function fadeOut()
	StarterGui:SetCore("TopbarEnabled", true)
	StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.All, true)

	local tween = TweenService:Create(frame, TweenInfo.new(1), {BackgroundTransparency = 1})
	tween:Play()

	for _, child in pairs(frame:GetChildren()) do
		if child:IsA("TextLabel") then
			TweenService:Create(child, TweenInfo.new(1), {TextTransparency = 1}):Play()
		end
	end

	tween.Completed:Wait()
	screenGui:Destroy()
end

-- Run
task.spawn(updateProgress)
task.wait(totalTime)
fadeOut()
