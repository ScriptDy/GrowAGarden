-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomLoadingScreen"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = game:GetService("CoreGui")

-- Full black background
local background = Instance.new("Frame")
background.Size = UDim2.new(1, 0, 1, 0)
background.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
background.BorderSizePixel = 0
background.Parent = screenGui

-- Player avatar icon (top-left, slightly lowered)
local avatarImage = Instance.new("ImageLabel")
avatarImage.Size = UDim2.new(0, 80, 0, 80)
avatarImage.Position = UDim2.new(0, 20, 0, 100) -- lowered Y from 20 to 100
avatarImage.BackgroundTransparency = 1
avatarImage.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png"
avatarImage.Parent = background

-- Top Title: RAYFIELD
local rayfieldTitle = Instance.new("TextLabel")
rayfieldTitle.Text = "PET SPAWNER V2.5"
rayfieldTitle.Size = UDim2.new(0, 400, 0, 50)
rayfieldTitle.Position = UDim2.new(0.5, -200, 0.05, 0)
rayfieldTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
rayfieldTitle.Font = Enum.Font.GothamBlack
rayfieldTitle.TextSize = 36
rayfieldTitle.BackgroundTransparency = 1
rayfieldTitle.Parent = background

-- Loading Label (increments of 5)
local loadingLabel = Instance.new("TextLabel")
loadingLabel.Text = "Loading: 0%"
loadingLabel.Size = UDim2.new(0, 300, 0, 40)
loadingLabel.Position = UDim2.new(0.5, -150, 0.12, 0)
loadingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
loadingLabel.Font = Enum.Font.Gotham
loadingLabel.TextSize = 24
loadingLabel.BackgroundTransparency = 1
loadingLabel.Parent = background

-- Progress bar background
local progressBarBackground = Instance.new("Frame")
progressBarBackground.Size = UDim2.new(0, 400, 0, 25)
progressBarBackground.Position = UDim2.new(0.5, -200, 0.45, 0)
progressBarBackground.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBarBackground.BorderSizePixel = 0
progressBarBackground.Parent = background

-- Rainbow progress bar (foreground)
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.Position = UDim2.new(0, 0, 0, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
progressBar.BorderSizePixel = 0
progressBar.Parent = progressBarBackground

-- Bottom text: Pet And Seed Spawner (larger)
local descLabel = Instance.new("TextLabel")
descLabel.Text = "Generating..."
descLabel.Size = UDim2.new(0, 600, 0, 60)
descLabel.Position = UDim2.new(0.5, -300, 0.65, 0)
descLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
descLabel.Font = Enum.Font.GothamBlack
descLabel.TextSize = 28
descLabel.BackgroundTransparency = 1
descLabel.Parent = background

-- Rainbow color function
local function getRainbowColor(t)
    local r = math.sin(t) * 127 + 128
    local g = math.sin(t + 2) * 127 + 128
    local b = math.sin(t + 4) * 127 + 128
    return Color3.fromRGB(r, g, b)
end

-- Animate loading: 5% every 4 seconds
spawn(function()
    for i = 0, 100, 5 do
        loadingLabel.Text = "Loading: " .. i .. "%"
        progressBar:TweenSize(UDim2.new(i / 100, 0, 1, 0), "Out", "Quad", 1, true)
        progressBar.BackgroundColor3 = getRainbowColor(tick())

        wait(4) -- 4 seconds per 5%
    end

    -- Freeze at 100%, rainbow keeps animating
    while true do
        progressBar.BackgroundColor3 = getRainbowColor(tick())
        wait(0.05)
    end
end)
